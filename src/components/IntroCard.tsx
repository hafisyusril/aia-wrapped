"use client";

import { HTMLProps, RefObject, useEffect } from "react";
import { useAnimate, useInView } from "framer-motion";

export default function IntroCard({
  containerRef,
}: {
  containerRef: RefObject<HTMLElement | null>;
}) {
  const [scope, animate] = useAnimate();
  const inView = useInView(scope, {
    root: containerRef,
    initial: false,
    amount: 0.75,
    once: true,
  });

  useEffect(() => {
    const animationKeyframes = {
      type: "keyframes",
      duration: 0.6,
    } as const;
    
    const enter = async () => {
      await animate(
        '[data-animate="bottom-box"]',
        { y: "-100%" },
        animationKeyframes,
      );
      await Promise.all([
        animate(
          '[data-animate="logo"]',
          { y: "50%", opacity: 1 },
          animationKeyframes,
        ),
        animate(
          '[data-animate="year"]',
          { y: "-50%", opacity: 1 },
          animationKeyframes,
        ),
      ]);
      await animate(
        '[data-animate="title"]',
        { y: "-50%", opacity: 1 },
        animationKeyframes,
      );
      await animate(
        '[data-animate="text"]',
        { y: "50%", opacity: 1 },
        animationKeyframes,
      );
    };

    const exit = async () => {
      animate(
        '[data-animate="bottom-box"]',
        { y: "100%" },
        animationKeyframes
      );
      animate(
        '[data-animate="logo"]',
        { y: "-50%", opacity: 0 },
        animationKeyframes,
      );
      animate(
        '[data-animate="year"]',
        { y: "50%", opacity: 0 },
        animationKeyframes,
      );
      animate(
        '[data-animate="title"]',
        { y: "50%", opacity: 0 },
        animationKeyframes,
      );
      animate(
        '[data-animate="text"]',
        { y: "-50%", opacity: 0 },
        animationKeyframes,
      );
    };

    if (inView) enter();
    else exit();
  }, [inView, animate]);

  return (
    <section
      ref={scope}
      className="flex flex-col relative w-full max-w-107.5 min-h-svh mx-auto overflow-hidden bg-[#F8114F]"
    >
      <div className="flex flex-1 flex-col justify-end gap-2 max-h-1/2 px-8 overflow-hidden">
        <SvgAsset.Logo
          data-animate="logo"
          className="opacity-0 -translate-y-1/2"
        />
        <SvgAsset.Title
          data-animate="title"
          className="opacity-0 translate-y-1/2"
        />
      </div>
      <div
        data-animate="bottom-box"
        className="flex flex-1 flex-col items-end justify-end max-h-1/2 overflow-hidden  bg-[#A00032] relative translate-y-full"
      >
        <div
          data-animate="text"
          className="flex flex-1 items-center self-start px-8 opacity-0 -translate-y-1/2"
        >
          <p className="text-white text-xl">Let's walk through <br/>your healthy journey</p>
        </div>
        <SvgAsset.Year
          data-animate="year"
          className="opacity-0 translate-y-1/2"
        />
      </div>
    </section>
  );
}

const SvgAsset = {
  Logo: (props: HTMLProps<SVGSVGElement>) => (
    <svg
      width="204"
      height="55"
      viewBox="0 0 204 55"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      {...props}
    >
      <g clipPath="url(#clip0_15_876)">
        <path
          d="M42.7949 41.2574H50.5799V6.16865H42.7949V41.2574ZM19.4352 5.715C19.4104 5.70514 19.2819 5.715 19.104 5.715C18.931 5.715 18.7975 5.71007 18.7778 5.715C18.7877 5.715 18.7926 5.715 18.7926 5.715C15.7725 5.7298 13.5087 7.07102 11.9616 10.4438C9.81149 15.0986 0 41.2574 0 41.2574H8.05185C8.05185 41.2574 9.50504 37.0562 11.2597 32.1548C13.7608 32.6973 16.4299 32.9882 19.2078 32.9783C21.9807 32.9635 24.6399 32.6529 27.1361 32.0858C28.9303 36.9823 30.517 41.2574 30.517 41.2574H38.4848C38.4848 41.2574 28.4607 15.0345 26.276 10.3896C24.7091 7.04143 22.4404 5.70514 19.4302 5.715M19.1633 26.2623C17.033 26.2623 15.2733 26.001 13.6471 25.5178C15.5995 20.0888 17.3641 15.1825 17.5865 14.5759C18.1204 13.1361 18.5109 12.6578 19.1386 12.6529C19.7614 12.6529 20.1469 13.1312 20.6956 14.571C20.9279 15.1726 22.7221 20.069 24.7091 25.4832C23.0681 25.9763 21.3085 26.2475 19.1633 26.2673M81.166 10.3846C79.5991 7.0365 77.3304 5.70021 74.3202 5.71007C74.2955 5.70021 74.167 5.71007 73.994 5.71007C73.821 5.71007 73.6826 5.70514 73.6678 5.71007C73.6776 5.71007 73.6826 5.71007 73.6826 5.71007C70.6625 5.72486 68.4037 7.06609 66.8516 10.4389C64.7015 15.1036 54.89 41.2623 54.89 41.2623H62.9418C62.9418 41.2623 64.395 37.0612 66.1547 32.1598C68.6557 32.7022 71.3199 32.9931 74.1027 32.9832C76.8707 32.9685 79.5299 32.6578 82.0261 32.0907C83.8154 36.9872 85.407 41.2623 85.407 41.2623H93.3748C93.3748 41.2623 83.3507 15.0395 81.1611 10.3945M74.0484 26.2623C71.918 26.2623 70.1633 26.001 68.5322 25.5178C70.4895 20.0888 72.2492 15.1825 72.4667 14.5759C73.0005 13.1361 73.3959 12.6578 74.0236 12.6529C74.6415 12.6529 75.032 13.1312 75.5806 14.571C75.8129 15.1726 77.6072 20.069 79.5942 25.4832C77.9532 25.9763 76.1935 26.2475 74.0484 26.2673"
          fill="white"
        />
        <path
          d="M125.77 26.928C125.77 27.6282 123.645 36.144 123.645 36.8442C123.645 37.5444 123.986 37.7761 123.986 37.7761C123.986 37.7761 124.45 40.4536 120.966 41.3067C120.966 41.3067 117.941 41.2278 118.084 38.2101C118.361 35.646 118.766 28.0572 122.884 23.4024C124.124 23.5848 125.77 24.9507 125.77 26.928ZM171.976 23.6686C172.697 23.6686 174.309 22.4359 174.309 21.4152C174.309 20.9566 172.559 17.1844 170.191 17.1844C169.504 17.1844 168.545 18.0276 168.545 18.7327C168.545 19.8965 169.544 23.6637 171.976 23.6637M126.734 20.9763C127.456 20.9763 128.785 20.4931 128.785 19.4724C128.785 19.0138 126.912 14.5365 124.544 14.5365C123.857 14.5365 122.898 15.3797 122.898 16.0848C122.898 17.2485 123.16 20.9763 126.734 20.9763ZM134.059 0.414203C133.085 -0.680471 120.6 -2.09073 109.839 31.7653C109.765 31.997 109.424 31.9773 109.38 31.7357C107.689 22.7515 108.431 12.5641 108.218 10.927C107.684 6.84911 104.224 8.15089 104.224 8.15089C102.662 11.3856 103.661 37.5394 106.271 40.9418C107.828 41.6075 112.281 41.3757 113.225 40.3205C113.225 40.3205 119.463 7.25838 134.054 0.409272M201.02 24.6006C200.698 24.6006 200.51 25.0049 200.51 25.0049C196.734 31.7998 193.319 37.2189 190.412 37.4359C189.785 37.4753 189.463 37.0809 189.34 36.4201L189.32 36.4744C188.964 33.856 191.421 27.4063 191.248 25.5671C191.188 24.8866 190.837 24.9556 190.402 24.6844C190.264 24.7978 190.106 24.9606 189.938 25.1627C189.874 25.2465 189.76 25.2761 189.656 25.2416C187.911 24.6055 185.731 24.1617 184.431 23.9842C185.771 20.2318 188.569 12.3619 188.569 11.6568C188.569 9.89645 187.274 9.2998 185.079 8.70809C181.55 14.9112 179.306 23.3531 179.153 23.9842C178.011 25.0099 176.291 24.068 175.95 26.07C176.805 26.9724 178.416 27.7219 178.416 28.4221C178.416 29.1223 177.215 31.9675 177.675 41.3067C178.292 41.5434 180.833 38.8412 180.907 38.0325C181.609 30.7643 183.453 28.1608 183.453 28.1608C183.453 28.1608 186.334 28.2495 188.064 27.9093C188.119 27.8994 188.158 27.9537 188.134 28.003C187.723 28.8314 185.247 33.9152 185.227 36.2771C185.207 39.3294 186.206 41.0552 188.751 41.287C189.261 41.3462 189.804 41.356 190.378 41.2968C192.775 40.9862 195.602 39.7485 197.97 36.9921C198.118 36.8146 198.405 36.9675 198.346 37.1943C194.604 50.4832 187.397 53.8116 184.367 54.5365C184.471 55.4635 189.715 55.1972 193.388 52.1055C197.634 48.5256 200.767 43.0523 202.023 38.7574C202.423 37.3965 202.814 35.9961 203.11 34.5562C203.644 31.9921 203.961 29.3245 204.005 26.6617C204.015 26.213 201.548 24.6055 201.025 24.6055M176.058 39.5069C176.009 39.5069 175.969 39.5118 175.925 39.5118C172.015 39.5118 176.612 25.7544 171.101 26.499C170.171 26.6223 168.748 27.357 168.273 27.6036C168.175 27.6578 168.091 27.7367 168.031 27.8353C167.562 28.6243 165.199 32.4606 161.195 36.716C160.864 37.0661 160.276 36.9428 160.133 36.4842C158.126 30.0296 166.959 11.0306 167.092 10.6164C167.759 8.47633 164.828 7.46055 163.37 7.30276C160.172 11.8146 154.804 26.144 155.338 37.5493C155.343 37.6972 155.259 37.8304 155.126 37.8895C154.221 38.2643 150.959 39.4477 151.339 36.785C151.438 36.0897 152.985 31.997 152.985 31.2919C152.985 30.8333 151.028 28.1903 149.555 28.1903C148.957 28.1903 143.401 35.1824 141.538 36.8097C141.221 37.0858 140.722 36.9724 140.549 36.5927C139.541 34.3836 141.978 28.3087 148.932 26.0059C149.001 25.9813 150.455 24.6154 150.717 24.2456C150.825 24.0878 150.85 23.8856 150.801 23.6982C150.717 23.3777 150.296 23.1608 150.272 23.1509C146.411 21.3708 137.806 21.6174 136.343 21.4152C137.425 16.4941 140.801 8.61933 140.895 7.85503C141.038 6.6716 139.877 5.52268 137.485 4.87673C133.619 11.6667 130.426 20.6608 130.258 21.3511C129.616 22.0217 128.657 21.7505 128.059 23.6391C128.059 24.497 129.448 25.4487 129.448 26.2179C129.448 26.9872 128.133 31.0996 128.632 41.3264C130.54 41.4398 132.596 38.432 132.73 37.5542C133.946 29.6844 135.137 26.0207 135.137 26.0207C138.132 26.0059 140.668 25.8087 142.768 25.5276C142.843 25.5178 142.882 25.6114 142.828 25.6558C139.131 28.7722 135.616 31.7998 135.7 37.6331C135.735 39.9951 138.236 41.3363 139.679 41.3314C142.16 41.3264 144.706 39.1223 145.917 37.7515C146.144 37.4951 146.569 37.6134 146.624 37.9487C146.99 40.1923 148.858 41.3314 150.657 41.3314C152.318 41.3314 154.765 39.7682 155.704 39.2604C155.788 39.216 155.887 39.2357 155.946 39.3047C156.569 40.0099 157.824 41.3363 159.025 41.3363C162.614 41.3363 166.252 36.1243 168.278 32.9093C168.456 32.6282 168.881 32.7022 168.956 33.0227C169.736 36.4645 169.702 41.3363 173.177 41.3363C174.121 41.3363 175.307 41.0897 176.34 40.7298C177.057 40.4783 176.815 39.4379 176.053 39.5069"
          fill="white"
        />
      </g>
      <defs>
        <clipPath id="clip0_15_876">
          <rect width="204" height="55" fill="white" />
        </clipPath>
      </defs>
    </svg>
  ),
  Title: (props: HTMLProps<SVGSVGElement>) => (
    <svg
      width="302"
      height="100"
      viewBox="0 0 302 100"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      {...props}
    >
      <g clipPath="url(#clip0_15_895)">
        <path
          d="M28.0328 100H20.5446L23.2959 65.0536L7.55363 100H0.0654297L3.63712 54.0081H11.5101L6.72968 88.8886L22.2614 54.0081H30.1961L27.2705 88.8886L40.9475 54.0081H48.8204L28.0328 100Z"
          fill="white"
        />
        <path
          d="M54.6572 100L53.7135 81.1365H49.6808L44.6717 100H37.5029L49.7135 54.0079H61.2343C69.5537 54.0079 71.8006 58.0781 69.2815 67.574C67.7715 73.2598 65.5392 77.3264 60.7806 79.5904L62.1454 100.004H54.6572V100ZM59.5646 60.529H55.1472L51.4086 74.6117H55.826C59.6663 74.6117 61.1 71.3804 62.1127 67.5704C63.1254 63.7603 63.4049 60.529 59.5646 60.529Z"
          fill="white"
        />
        <path
          d="M83.1362 100L83.6988 90.8925H73.1398L68.9293 100H61.3757L84.7841 54.0079H91.7605L90.6207 100H83.1325H83.1362ZM85.2922 65.1158L76.2795 84.364H84.0872L85.2922 65.1158Z"
          fill="white"
        />
        <path
          d="M107.888 81.9754H103.601L98.8167 99.9963H91.6479L103.858 54.0042H115.314C123.572 54.0042 125.858 58.3968 123.303 68.0209C120.748 77.6451 116.142 81.9717 107.888 81.9717V81.9754ZM113.325 60.529H109.292L105.332 75.4506H109.365C113.205 75.4506 114.904 72.6736 116.138 68.0209C117.372 63.3682 117.169 60.529 113.329 60.529H113.325Z"
          fill="white"
        />
        <path
          d="M134.066 81.9754H129.779L124.995 99.9963H117.826L130.036 54.0042H141.492C149.746 54.0042 152.036 58.3968 149.481 68.0209C146.926 77.6451 142.32 81.9717 134.066 81.9717V81.9754ZM139.503 60.529H135.47L131.51 75.4506H135.543C139.383 75.4506 141.078 72.6736 142.316 68.0209C143.55 63.3682 143.347 60.529 139.507 60.529H139.503Z"
          fill="white"
        />
        <path
          d="M144 100L156.211 54.0079H175.347L173.615 60.5327H161.648L158.185 73.5822H168.49L166.759 80.107H156.454L152.904 93.4789H164.871L163.14 100.004H144.004L144 100Z"
          fill="white"
        />
        <path
          d="M187.572 96.1862C185.151 98.3184 182.08 99.9963 177.728 99.9963H166.145L178.356 54.0042H189.938C194.29 54.0042 196.468 55.6821 197.757 57.8143C199.92 61.2361 198.82 66.3394 196.007 76.9343C193.194 87.5293 191.55 92.7608 187.568 96.1826L187.572 96.1862ZM191.165 62.4047C190.751 61.3057 189.742 60.5327 188.015 60.5327H183.79L175.042 93.4752H179.267C180.995 93.4752 182.417 92.6986 183.412 91.6031C185.387 89.471 186.715 84.9502 188.842 76.9417C190.969 68.9332 192.007 64.5406 191.165 62.4084V62.4047Z"
          fill="white"
        />
        <path
          d="M11.9528 27.9711L7.16878 45.9921H0L4.78403 27.9711L3.37931 0H11.314L10.9583 18.2151L20.3376 0H28.2105L11.9528 27.9711Z"
          fill="white"
        />
        <path
          d="M16.7041 45.9921L28.9146 0H48.0507L46.3193 6.52477H34.352L30.8892 19.5743H41.1941L39.4627 26.0991H29.1578L25.6079 39.471H37.5752L35.8438 45.9958H16.7077L16.7041 45.9921Z"
          fill="white"
        />
        <path
          d="M57.089 45.9921L57.6517 36.8845H47.0927L42.8822 45.9921H35.3286L58.737 0H65.7134L64.5736 45.9921H57.0854H57.089ZM59.2451 11.1115L50.2324 30.3598H58.04L59.2451 11.1115Z"
          fill="white"
        />
        <path
          d="M82.7514 45.9921L81.8077 27.1285H77.775L72.766 45.9921H65.5972L77.8113 0H89.3322C97.6516 0 99.8984 4.07019 97.3794 13.5661C95.8694 19.2519 93.6371 23.3184 88.8785 25.5825L90.2433 45.9958H82.7551L82.7514 45.9921ZM87.6625 6.52477H83.2451L79.5064 20.6074H83.9238C87.7641 20.6074 89.1979 17.3762 90.2106 13.5661C91.2233 9.75601 91.5028 6.52477 87.6625 6.52477Z"
          fill="white"
        />
        <path
          d="M101.249 45.9921L113.456 0H120.624L108.414 45.9921H101.245H101.249Z"
          fill="white"
        />
        <path
          d="M130.813 45.9921L127.314 18.6694L120.058 45.9921H112.889L125.104 0H131.503L134.937 27.3227L142.192 0H149.361L137.151 45.9921H130.813Z"
          fill="white"
        />
        <path
          d="M165.949 45.9921L171.281 25.9012H162.385L157.053 45.9921H149.884L162.098 0H169.267L164.123 19.3801H173.02L178.16 0H185.328L173.118 45.9921H165.949Z"
          fill="white"
        />
        <path
          d="M177.597 45.9921L189.808 0H208.944L207.212 6.52477H195.245L191.782 19.5743H202.087L200.356 26.0991H190.051L186.501 39.471H198.468L196.737 45.9958H177.601L177.597 45.9921Z"
          fill="white"
        />
        <path
          d="M217.982 45.9921L218.544 36.8845H207.985L203.775 45.9921H196.221L219.63 0H226.606L225.466 45.9921H217.978H217.982ZM220.138 11.1115L211.125 30.3598H218.933L220.138 11.1115Z"
          fill="white"
        />
        <path
          d="M226.494 45.9921L238.704 0H245.873L235.394 39.4673H247.361L245.63 45.9921H226.494Z"
          fill="white"
        />
        <path
          d="M267.372 6.52477L256.893 45.9921H249.724L260.203 6.52477H252.588L254.319 0H276.784L275.053 6.52477H267.372Z"
          fill="white"
        />
        <path
          d="M282.621 45.9921L287.953 25.9012H279.056L273.724 45.9921H266.555L278.766 0H285.935L280.791 19.3801H289.688L294.831 0H302L289.79 45.9921H282.621Z"
          fill="white"
        />
      </g>
      <defs>
        <clipPath id="clip0_15_895">
          <rect width="302" height="100" fill="white" />
        </clipPath>
      </defs>
    </svg>
  ),
  Year: (props: HTMLProps<SVGSVGElement>) => (
    <svg
      width="206"
      height="98"
      viewBox="0 0 206 98"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      {...props}
    >
      <g clipPath="url(#clip0_15_969)">
        <path
          d="M0 98.1313L3.28103 86.0165L40.1165 39.4409C43.3871 35.4037 46.7962 29.3464 48.6928 22.3439C50.188 16.8242 47.9591 13.9992 44.0136 13.9992C40.068 13.9992 36.074 16.6906 34.5789 22.2104L32.9003 28.4013H18.4783L20.0081 22.748C22.0847 15.0744 25.5041 10.4997 30.2976 6.86322C35.0911 3.23017 41.6255 1.2099 47.4746 1.2099C53.3237 1.2099 58.0964 2.68914 61.0555 6.32562C63.9178 9.82513 65.0461 15.2114 62.966 22.885C61.0694 29.884 56.7051 37.9616 51.9704 43.8854L18.8348 85.3454H46.0486L42.5842 98.1347H0V98.1313Z"
          fill="#F8114F"
        />
        <path
          d="M85.3276 92.3467C80.5341 95.9832 74.4081 98 68.4206 98C62.4331 98 57.2658 95.9797 54.4416 92.3467C51.6174 88.7136 50.5411 84.1355 52.6211 76.4619L67.4965 21.5381C69.5731 13.8645 73.1276 9.2898 77.9211 5.65332C82.7145 2.02027 88.9755 0 94.963 0C100.951 0 105.983 2.02027 108.807 5.65332C111.631 9.2898 112.708 13.8645 110.628 21.5381L95.7521 76.4619C93.6755 84.1355 90.1211 88.7102 85.3276 92.3467ZM96.3474 21.0005C97.8426 15.4807 95.4406 12.7893 91.4951 12.7893C87.5496 12.7893 83.5556 15.4807 82.0604 21.0005L66.8943 76.9995C65.3991 82.5193 67.9361 85.2107 71.8816 85.2107C75.8272 85.2107 79.6862 82.5193 81.1813 76.9995L96.3474 21.0005Z"
          fill="#F8114F"
        />
        <path
          d="M95.5132 98.1313L98.7943 86.0165L135.63 39.4409C138.9 35.4037 142.309 29.3464 144.206 22.3439C145.701 16.8242 143.472 13.9992 139.527 13.9992C135.581 13.9992 131.587 16.6906 130.092 22.2104L128.414 28.4013H113.992L115.521 22.748C117.598 15.0744 121.017 10.4997 125.811 6.86322C130.604 3.23017 137.139 1.2099 142.988 1.2099C148.837 1.2099 153.61 2.68914 156.569 6.32562C159.431 9.82513 160.559 15.2114 158.479 22.885C156.583 29.884 152.218 37.9616 147.484 43.8854L114.348 85.3454H141.562L138.097 98.1347H95.5098L95.5132 98.1313Z"
          fill="#F8114F"
        />
        <path
          d="M180.91 92.2109C176.217 95.9809 169.779 98.1347 163.93 98.1347C158.081 98.1347 152.737 96.2514 149.913 92.6149C146.951 88.9784 146.013 84.4037 148.127 76.5966L149.404 71.8849H163.826L162.477 76.8671C160.909 82.6574 163.311 85.3488 167.391 85.3488C169.295 85.3488 171.382 84.6777 173.22 82.9245C175.435 80.7707 177.027 77.4047 180.128 65.9611C182.9 55.7297 183.72 51.6926 182.779 49.1347C181.966 47.1144 180.315 46.1728 178.003 46.1728C173.922 46.1728 170.025 48.9977 168.568 54.384L168.021 56.4042H154.278L169.226 1.2099H211L207.535 13.9992H178.961L171.998 39.7114C173.697 37.9616 175.902 36.3454 178.273 35.1332C180.64 33.9211 183.374 33.3835 185.686 33.3835C191.944 33.3835 195.207 35.4037 197.18 39.1738C199.489 43.2109 199.108 49.1347 194.55 65.9611C191.269 78.0759 189.054 85.7494 180.91 92.2109Z"
          fill="#F8114F"
        />
      </g>
      <defs>
        <clipPath id="clip0_15_969">
          <rect width="211" height="98" fill="white" />
        </clipPath>
      </defs>
    </svg>
  ),
};
